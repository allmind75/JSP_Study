<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace : package처럼 용도별로 구분하기 위한 이름 -->
<mapper namespace="admin">

	<select id="selectLogin" parameterType="dto.AdminDTOIn" resultType="dto.AdminDTOIn">
		SELECT * FROM admin WHERE id = #{id} and pw = SHA1(#{pw});
	</select>
	
	<select id="selectListTrip" parameterType="dto.PageIn" resultType="hashmap">
		SELECT tnum, title, regdate, cnt FROM board_trip 
		ORDER BY tnum DESC LIMIT #{start}, #{pageSize};
	</select>
	
	<select id="selectReadTrip" resultType="dto.BoardTripDTOIn">
		SELECT tnum, title, content, address, phone, time, map FROM board_trip
		WHERE tnum = #{tnum};
	</select>
	
	<select id="selectCountTrip" resultType="hashmap">
		SELECT COUNT(*) AS cnt FROM board_trip;
	</select>
	
	<insert id="insertTrip" parameterType="dto.BoardTripDTOIn">
		INSERT INTO board_trip SET
		title = #{title}, content = #{content}, address = #{address},
		phone = #{phone}, time = #{time}, img = #{img}, map = #{map};		
	</insert>
	
	<update id="updateTrip" parameterType="dto.BoardTripDTOIn">
		UPDATE board_trip
			<set>
				<if test="title != null">title = #{title},</if>
				<if test="content != null">content = #{content},</if>
				<if test="address != null">address = #{address},</if>
				<if test="phone != null">phone = #{phone},</if>
				<if test="time != null">time = #{time},</if>
				<if test="img != null">img = #{img},</if>
				<if test="map != null">map = #{map}</if>
			</set>
		WHERE tnum = #{tnum};
	</update>
</mapper>

